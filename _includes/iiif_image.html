{% assign uri = site.baseurl | append: "/iiif/plates/images/" | append: page.pid | append: "-1/info.json" %}

<script src="{{ site.js.openseadragon.cdn }}"></script>
<script>
//<![CDATA[
var iiif_viewerfuncs = [];
window.onload = function() {
  var arrayLength = iiif_viewerfuncs.length;
  for (var i = 0; i < arrayLength; i++) {
    iiif_viewerfuncs[i]();
  }
}
//]]
</script>
<div id="openseadragon{{ page.instancecounter }}" class="iiif_image"></div>
<script>
//<![CDATA[
iiif_viewerfuncs.push(
  function initOpenSeadragon{{ page.instancecounter }}() {
    OpenSeadragon({
      id: "openseadragon{{ page.instancecounter }}",
      minZoomImageRatio: 1,
      prefixUrl: "https://cdnjs.cloudflare.com/ajax/libs/openseadragon/2.3.1/images/",
      tileSources: "{{ uri }}",
      crossOriginPolicy: false
    });
  }
)
//]]>
</script>
